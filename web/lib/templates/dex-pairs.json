{
  "title": "DEX Pairs",
  "tagline": "crypto, dex, liquidity, dexscreener",
  "data_code": "const main = async (jsParams) => {\n  console.log(\"Starting DEX Pairs fetch with params:\", jsParams);\n  const tokenAddress = typeof jsParams.token_address === 'string' ? jsParams.token_address : '0x4ed4e281567949189541112959c573d052d2d0b6'; // Default to $DEGEN\n\n  let result = {\n    symbol: \"N/A\",\n    name: \"Token Not Found\",\n    pairs: [],\n    error: false,\n    updated_at: Math.floor(Date.now() / 1000)\n  };\n\n  try {\n    console.log(`Fetching pairs for ${tokenAddress}...`);\n    const resp = await fetch(`https://api.dexscreener.com/latest/dex/tokens/${tokenAddress}`);\n\n    if (resp && resp.ok) {\n      const data = await resp.json();\n      if (data && data.pairs && Array.isArray(data.pairs)) {\n        // Take top 4 pairs by volume\n        const sortedPairs = data.pairs.sort((a, b) => (b.volume?.h24 || 0) - (a.volume?.h24 || 0)).slice(0, 4);\n        \n        result.symbol = sortedPairs[0]?.baseToken?.symbol || \"N/A\";\n        result.name = sortedPairs[0]?.baseToken?.name || \"Unknown Token\";\n        result.pairs = sortedPairs.map(p => ({\n          dex: p.dexId,\n          quote: p.quoteToken?.symbol,\n          price: parseFloat(p.priceUsd).toFixed(4),\n          liquidity: p.liquidity?.usd,\n          volume24h: p.volume?.h24,\n          change24h: p.priceChange?.h24\n        }));\n      }\n    } else {\n      result.error = \"API_UNAVAILABLE\";\n    }\n  } catch (e) {\n    console.error(\"DEX fetch failed:\", e);\n    result.error = e.message;\n  }\n\n  return result;\n};\nmain;",
  "ui_code": "import { Share2, TrendingUp, TrendingDown, Clock } from 'lucide-react';\n\nexport default function Widget({ symbol, name, pairs, error, updated_at }) {\n  if (error) {\n    return (\n      <div style={{ display: 'flex', flexDirection: 'column', width: '1200px', height: '800px', background: '#020617', color: '#fff', alignItems: 'center', justifyContent: 'center' }}>\n        <div style={{ fontSize: '48px', fontWeight: 800 }}>⚠️ Data Error</div>\n        <div style={{ fontSize: '24px', opacity: 0.7, marginTop: '20px' }}>{error === 'API_UNAVAILABLE' ? 'DexScreener API is currently busy.' : 'Failed to fetch pair data.'}</div>\n      </div>\n    );\n  }\n\n  const timeStr = updated_at ? new Date(updated_at * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : 'N/A';\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', width: '1200px', height: '800px', background: 'linear-gradient(135deg, #020617 0%, #0f172a 100%)', color: '#f8fafc', padding: '64px' }}>\n      {/* Header */}\n      <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '40px' }}>\n        <div style={{ display: 'flex', flexDirection: 'column' }}>\n          <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', gap: '12px' }}>\n            <div style={{ fontSize: '20px', fontWeight: 600, color: '#38bdf8', letterSpacing: '0.1em', textTransform: 'uppercase' }}>DEX Pairs Analysis</div>\n            <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', gap: '6px', background: 'rgba(255,255,255,0.05)', padding: '4px 12px', borderRadius: '8px', fontSize: '14px', opacity: 0.6 }}>\n              <Clock style={{ width: '14px', height: '14px' }} />\n              <span>Last update: {timeStr} UTC</span>\n            </div>\n          </div>\n          <div style={{ fontSize: '80px', fontWeight: 900, marginTop: '8px' }}>{symbol}</div>\n          <div style={{ fontSize: '24px', opacity: 0.6 }}>{name}</div>\n        </div>\n        <div style={{ background: 'rgba(56, 189, 248, 0.1)', border: '1px solid rgba(56, 189, 248, 0.2)', padding: '12px 24px', borderRadius: '100px', display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: '#10b981' }}></div>\n          <div style={{ fontSize: '18px', fontWeight: 600, color: '#38bdf8' }}>Live on Base</div>\n        </div>\n      </div>\n\n      {/* Grid */}\n      <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', gap: '24px', flex: 1 }}>\n        {Array.isArray(pairs) && pairs.map((pair, idx) => (\n          <div key={idx} style={{ display: 'flex', flexDirection: 'column', width: '524px', padding: '32px', background: 'rgba(30, 41, 59, 0.5)', borderRadius: '32px', border: '1px solid rgba(255, 255, 255, 0.1)' }}>\n            <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <div style={{ fontSize: '16px', textTransform: 'uppercase', opacity: 0.5, fontWeight: 700 }}>{pair.dex}</div>\n                <div style={{ fontSize: '28px', fontWeight: 800 }}>{symbol}/{pair.quote}</div>\n              </div>\n              <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', gap: '8px', color: pair.change24h >= 0 ? '#4ade80' : '#f87171', fontSize: '20px', fontWeight: 700 }}>\n                {pair.change24h >= 0 ? <TrendingUp style={{ width: '24px', height: '24px' }} /> : <TrendingDown style={{ width: '24px', height: '24px' }} />}\n                {Math.abs(pair.change24h).toFixed(2)}%\n              </div>\n            </div>\n            \n            <div style={{ fontSize: '48px', fontWeight: 800, marginBottom: '24px' }}>${pair.price}</div>\n            \n            <div style={{ display: 'flex', flexDirection: 'row', gap: '32px' }}>\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <div style={{ fontSize: '14px', opacity: 0.4, fontWeight: 600 }}>24H VOLUME</div>\n                <div style={{ fontSize: '20px', fontWeight: 700 }}>${(pair.volume24h / 1000).toFixed(1)}k</div>\n              </div>\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                <div style={{ fontSize: '14px', opacity: 0.4, fontWeight: 600 }}>LIQUIDITY</div>\n                <div style={{ fontSize: '20px', fontWeight: 700 }}>${(pair.liquidity / 1000).toFixed(1)}k</div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Footer */}\n      <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between', marginTop: '40px', fontSize: '18px', opacity: 0.4, fontWeight: 500 }}>\n        <div>Source: DexScreener Public API</div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <Share2 style={{ width: '20px', height: '20px' }} />\n          Verified via PinV TEE\n        </div>\n      </div>\n    </div>\n  );\n}",
  "parameters": [
    {
      "name": "token_address",
      "type": "user_setting",
      "description": "The contract address of the token (Base only)."
    }
  ],
  "preview_data": {
    "symbol": "DEGEN",
    "name": "Degen (Base)",
    "pairs": [
      { "dex": "uniswap", "quote": "WETH", "price": "0.0124", "liquidity": 1200000, "volume24h": 450000, "change24h": 12.5 },
      { "dex": "baseswap", "quote": "WETH", "price": "0.0125", "liquidity": 800000, "volume24h": 120000, "change24h": -2.1 },
      { "dex": "aerodrome", "quote": "USDC", "price": "0.0123", "liquidity": 500000, "volume24h": 85000, "change24h": 5.4 },
      { "dex": "sushiswap", "quote": "WETH", "price": "0.0124", "liquidity": 200000, "volume24h": 15000, "change24h": 0.8 }
    ],
    "error": false,\n    "updated_at": 1770907200\n  }\n}
